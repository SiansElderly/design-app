import{r as t,u as v,j as e,c as y,b as N,d as b,a as m,S as w,A as f,B as n,R as S,C as u}from"./index-DLumRCDu.js";import{C as l,S as C}from"./services-CGh0ARSt.js";const x=t.forwardRef(({bsPrefix:i,bg:r="primary",pill:s=!1,text:d,className:h,as:j="span",...o},p)=>{const a=v(i,"badge");return e.jsx(j,{ref:p,...o,className:y(h,a,s&&"rounded-pill",d&&`text-${d}`,r&&`bg-${r}`)})});x.displayName="Badge";function I(){const{id:i}=N(),r=b(),[s,d]=t.useState(null),[h,j]=t.useState(!0),[o,p]=t.useState("");return t.useEffect(()=>{(async()=>{try{if(!i)throw new Error("ID услуги не указан");const c=parseInt(i);if(isNaN(c))throw new Error("Неверный ID услуги");const g=await C.getById(c);d(g)}catch(c){p(c instanceof Error?c.message:"Ошибка загрузки данных")}finally{j(!1)}})()},[i]),h?e.jsx(m,{className:"text-center py-5",children:e.jsx(w,{animation:"border",variant:"primary"})}):o?e.jsxs(m,{className:"py-3",children:[e.jsx(f,{variant:"danger",children:o}),e.jsx(n,{variant:"secondary",onClick:()=>r(-1),children:"Назад"})]}):s?e.jsxs(m,{className:"py-4",children:[e.jsx(n,{variant:"outline-secondary",onClick:()=>r(-1),className:"mb-3",children:"← Назад к списку"}),e.jsx(l,{className:"shadow-sm",children:e.jsx(l.Body,{children:e.jsxs(S,{children:[e.jsx(u,{md:6,className:"mb-4",children:e.jsx(l.Img,{variant:"top",src:s.screenshot||"/default-service.jpg",alt:s.name,className:"img-fluid rounded",onError:a=>a.currentTarget.src="/default-service.jpg"})}),e.jsxs(u,{md:6,children:[e.jsx(l.Title,{as:"h2",children:s.name}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx(x,{bg:"primary",children:s.category}),e.jsx(x,{bg:s.complexity_level==="easy"?"success":s.complexity_level==="medium"?"warning":"danger",children:s.complexity_level})]}),e.jsx(l.Text,{className:"fs-5 fw-bold mb-3",children:s.price?`${s.price} ₽`:"Цена не указана"}),s.tags&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{children:"Теги:"}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:s.tags.split(",").map(a=>e.jsx(x,{bg:"secondary",children:a.trim()},a))})]}),s.html_css_code&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:"Пример кода:"}),e.jsx("pre",{className:"bg-light p-3 rounded",children:e.jsx("code",{children:s.html_css_code})})]}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx(n,{variant:"primary",children:"Добавить в заявку"}),e.jsx(n,{variant:"outline-secondary",onClick:()=>r(-1),children:"Назад"})]})]})]})})})]}):e.jsxs(m,{className:"py-3",children:[e.jsx(f,{variant:"warning",children:"Услуга не найдена"}),e.jsx(n,{variant:"secondary",onClick:()=>r(-1),children:"Назад"})]})}export{I as default};
